/*!
* Data Aquarium Framework  - Universal Input / QR Code 
* Copyright 2021 Code On Time LLC; Licensed MIT; http://codeontime.com/license
*/
(function(){function u(n){return n.length!==6||n.match(/^(salmon|tomato|orange|yellow|violet|orchid|purple|indigo|bisque|sienna|maroon)$/i)||(n="#"+n),n}var t=$app,i=t.input,f=t.touch,r=window,e=$(document),o=Web.DataViewResources,s=t.clientRect,n=t.html,h=n.tag,c=n.div,l=n.span,a=n.$tag,v=n.$p,y=n.$div,p=n.$span,w=n.$a,b=n.$i,k=n.$li,d=n.$ul;i.methods.qrcode={_init:function(n,r,u,f){t.getScript("~/js/lib/qrcode.min.js",function(){QRCode.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&this._oDrawing.makeImage()};i.methods.qrcode.makeCode(n,r,u,f)})},makeCode:function(n,t,i,f){var e=n.tagged(/input-qrcode-(\d+)x(\d+)?/),o=e?parseInt(e[1]):128,s=e?parseInt(e[2]):128,h=n.tagged(/input-qrcode-color-dark-(\w+)/),c=n.tagged(/input-qrcode-color-light-(\w+)/),l=u(c?c[1]:"ffffff"),a=n.tagged(/input-qrcode-correct-level-(L|M|Q|H)/i);if(f.css({width:o,height:s,display:"inline-block",padding:1,"background-color":l}),t!=null)try{new QRCode(f.empty()[0],{text:i,width:o*Math.ceil(r.devicePixelRatio),height:s*Math.ceil(r.devicePixelRatio),colorDark:u(h?h[1]:"000000"),colorLight:l,correctLevel:QRCode.CorrectLevel[a?a[1].toUpperCase():"H"]});f.find("canvas").css("visibility","hidden");f.css("visibility","").find("img").css({maxWidth:"100%",maxHeight:"100%"})}catch(v){f.text(v.message).css({display:"",width:""})}else f.parent().remove()}}})();